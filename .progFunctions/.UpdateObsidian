#!/bin/bash

OS_TYPE=$(uname -s)

if [[ "$OS_TYPE" == "Linux" ]]; then
    repo_dir="$HOME/GitRepositories/Lapfips_Main_Program/.progFunctions"
elif [[ "$OS_TYPE" == "Darwin" ]]; then
    repo_dir="$HOME/GitRepositories/Lapfips_Main_Program/.progFunctions"
else
    if [[ -n "$USERPROFILE" ]]; then
        repo_dir=$(cygpath -u "$USERPROFILE/GitRepositories/Lapfips_Main_Program/.progFunctions")
    else
        echo -e "\nUnable to determine the Windows user profile."
        exit 1
    fi
fi

repo_exit=$(echo "$USERPROFILE/GitRepositories/Code_Perso_Ethan/Obsidian/" | sed 's/\\/\//g' | sed 's/C:/\/c/')
repo_update=$(echo "$USERPROFILE/GitRepositories/Lapfips_Main_Program/.progFunctions" | sed 's/\\/\//g' | sed 's/C:/\/c/')

if [[ -d "$repo_dir" ]]; then
    if [[ -d "$repo_exit" ]]; then
        mkdir -p "$repo_exit"
    fi
    rm -rf "$repo_exit"*
    cp -r "$repo_dir"* "$repo_exit"
    $repo_update/.UpdateRepo Code_perso_Ethan "git@github.com:" $1
else
    echo "No such repo for obsidian"
fi