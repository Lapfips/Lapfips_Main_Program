#!/bin/bash

path="GitRepositories"

if [[ -z "$1" ]]; then
    echo
    read -p "Which type of update do you want to do ? :  " CHOICE
else
    CHOICE=$1
fi

cd
if [[ ! -d $path ]]; then
    mkdir -p $path
fi

case $CHOICE in
    -a) FUNC=All ;;
    -o) FUNC=Organizations ;;
    -l) FUNC=Labs ;;
    -p) FUNC=Personals ;;
    -op) FUNC=Optionals ;;
    -ob) FUNC=Obsidian ;;
    -help)
        echo -e "\nChoose a parameter between :\n\n-a   ->  Update all repositories\n-p   ->  Update personals repositories\n-o   ->  Update organizations repositories\n-l   ->  Update laboratories repositories\n-op  ->  Update optionals repositories\n-ob  ->  Update obsidian database"
        exit 0
        ;;
    *)
        echo -e "\nInvalid parameter. Try again"
        exit 1
        ;;
esac

repo_dir=$(echo "$USERPROFILE/GitRepositories/Lapfips_Main_Program/.progFunctions" | sed 's/\\/\//g' | sed 's/C:/\/c/')

if [[ -f "$repo_dir/.Update$FUNC" ]]; then
    echo
    bash "$repo_dir/.Update$FUNC" "$2"
else
    echo -e "\nFunction script $repo_dir/.Update$FUNC not found."
    exit 1
fi
